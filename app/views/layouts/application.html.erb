<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>
			<%= controller.controller_name %>: <%= controller.action_name %>
		</title>
		
		
		<link rel="stylesheet" href="/stylesheets/screen.css" type="text/css" media="screen, projection">
		<link rel="stylesheet" href="/stylesheets/print.css" type="text/css" media="print">	
		<!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
		
		<%= javascript_include_tag :defaults %>
	</head>
	<body>
		<!--- #container start -->
		<div class="container showgrid">
			<div id="header" class="span-24 last">
				<h1>ECSE 321</h1><br />
			</div>
			
			<div class="sidebar span-4">
				<% if !current_user %> 
					<%= link_to "Log In", new_user_session_path %>
				<% else %> 
					<%= link_to "My Account", account_path %> | 
					<%= link_to "Logout", user_session_path, :method => :delete, :confirm => "Are you sure you want to logout?" %> 
					<br/>
					<% semantic_menu :class => "menu" do |root|
					  root.add "Dashboard", root_path
					  
					  root.add "Time Tracking", hour_reports_path do |hours|
						hours.add "New Hour Report", new_hour_report_path if can_create?(HourReport.new)
					  end
					  
					  root.add "Expenses", expenses_path do |expenses|
						expenses.add "New Expense", new_expense_path if can_create?(Expense.new)
					  end
					 
					root.add "Projects", projects_path do |projects|
						projects.add "New Project", new_project_path if can_create?(Project.new)
					end
					
					root.add "Tasks", tasks_path do |tasks|
						tasks.add "New Task", new_task_path if can_create?(Task.new)
					end
					  
					  root.add "Invoices", "#"
					
					  root.add "Contacts", contacts_path do |contacts|
						contacts.add "Add Contact", new_contact_path if can_create?(Contact.new)
						contacts.add "List Businesses", businesses_path
						contacts.add "Add Business", new_business_path if can_create?(Business.new)
					  end
					  
					  root.add "Users", users_path do |users|
						users.add "Add User", new_account_path if can_create?(User.new)
					  end
					  
					end %>
				<% end %>
			</div>
			
			<!--- #content start -->
			<div id="content" class="span-20 last">
				
				<% [:error, :notice, :success].each do |f| %>
					<% if flash[f] %>
					<div class="span-4">&nbsp;</div>
					<div class="span-12 <%= f%>">
						<%= flash[f] %>
					</div>
					<% end %>
				<% end %>
				
				<div class="span-20 last">
					<%= yield  %>
				</div>
			
			<!-- #content end -->
			</div>
			
		<!-- #container end -->
		</div>
				
		<div id="footer" class="span-22 push-1 last"></div>
		
	</body>
</html>